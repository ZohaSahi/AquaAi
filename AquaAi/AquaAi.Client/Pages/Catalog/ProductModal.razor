@page "/catalog/Productmodal"
@using System.Net.Http.Json
@using AquaAi.shared.Models
@using AquaAi.Client.Pages.Catalog
@using AquaAi.Client
@inject HttpClient httpClient
@inject ISnackbar _snackBar
@inject IDialogService _dialogService

<style>
    .mud-table-container {
        overflow: auto;
    }
</style>

<MudDialog @bind-IsOpen="@IsOpen" MaxWidth="MaxWidth.Small">
    <TitleContent>
        @if (IsEditMode)
        {
            <MudText Typo="Typo.h6">Edit Liquid</MudText>
        }
        else
        {
            <MudText Typo="Typo.h6">Create Liquid</MudText>
        }
    </TitleContent>
    <DialogContent>
        <MudForm @ref="form" IsValid="@isValid" ValidationSummary="@validations">
            <MudTextField @bind-Value="Liquid.LiquidName" Label="Name" Required="true" RequiredError="Name is required" />
            <MudTextField @bind-Value="Liquid.Length" Label="Length" Required="true" RequiredError="Length is required" />
            <MudTextField @bind-Value="Liquid.Width" Label="Width" Required="true" RequiredError="Width is required" />
            <MudTextField @bind-Value="Liquid.Height" Label="Height" Required="true" RequiredError="Height is required" />
            <MudTextField @bind-Value="Liquid.Liquid_price" Label="Price" Required="true" RequiredError="Price is required" />
        </MudForm>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Save" Color="Color.Primary" Disabled="!isValid">Save</MudButton>
        <MudButton OnClick="Cancel" Color="Color.Secondary">Cancel</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] MudDialogInstance MudDialog { get; set; }
    [Parameter] public Liquid Liquid { get; set; } = new Liquid();
    [Parameter] public bool IsEditMode { get; set; }
    private bool IsOpen { get; set; }
    private MudForm? form;
    private bool isValid;
    private string? validations;

    private void Save()
    {
        if (form.IsValid)
        {
            MudDialog.Close(DialogResult.Ok(Liquid));
        }
    }

    private void Cancel()
    {
        MudDialog.Cancel();
    }
}
